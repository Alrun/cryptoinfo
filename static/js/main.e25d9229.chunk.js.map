{"version":3,"sources":["context/reducer.js","context/index.js","utilites.js","context/actions.js","components/TableHead/TableHead.js","components/TableRow/TableRow.js","components/Table/Table.js","components/TableContainer/TableContainer.js","components/Main/Main.js","App.js","serviceWorker.js","index.js"],"names":["initialState","currency","sortBy","sortDesc","tableData","spreadsheet","isLoading","error","data","market","reducer","state","action","console","log","type","bool","err","cur","StoreContext","createContext","sorting","arr","reverse","sortedArr","sort","a","b","toLowerCase","spreadsheetFetchSuccess","spreadsheetLoading","spreadsheetError","msg","marketFetchSuccess","marketLoading","marketError","setCurrency","setTableData","sortItems","head","id","title","TableHead","props","useContext","dispatch","style","display","padding","map","item","width","fontWeight","key","Math","random","onClick","marginLeft","TableRow","buyPrice","price","quantity","buyFee","sellFee","wallet","Array","isArray","join","Table","group","i","SPREADSHEET_ADDRESS","MARKET_KEY","TableContainer","getSpreadsheetData","useCallback","axios","get","response","feed","entry","spreadsheetData","gsx$title","$t","toUpperCase","parseFloat","gsx$price","replace","gsx$quantity","gsx$buyfee","gsx$sellfee","gsx$wallet","getMarketData","coins","coinListWODouble","reduce","acc","curr","includes","push","coinList","schemaMarket","Name","label","Label","Price","timestamp","Timestamp","marketData","Markets","useEffect","length","coinsFromSpreadsheet","compileTableData","rawData","coinPriceData","filter","match","currencyListWCount","tableArr","hasOwnProperty","groupArr","sum","forEach","feeBuy","feeSell","walletList","table","Main","Container","maxWidth","App","useReducer","Provider","value","Boolean","window","location","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.e25d9229.chunk.js","sourcesContent":["export const initialState = {\r\n  currency: 'usd',\r\n  sortBy: 'title',\r\n  sortDesc: false,\r\n  tableData: [],\r\n  spreadsheet: {\r\n    isLoading: false,\r\n    error: '',\r\n    data: []\r\n  },\r\n  market: {\r\n    isLoading: false,\r\n    error: '',\r\n    data: []\r\n  }\r\n};\r\n\r\nexport const reducer = (state, action) => {\r\n  console.log('action ', action);\r\n\r\n  switch (action.type) {\r\n    case 'SPREADSHEET_FETCH_SUCCESS':\r\n      return {\r\n        ...state,\r\n        spreadsheet: {\r\n          ...state.spreadsheet,\r\n          data: action.data\r\n        }\r\n      };\r\n\r\n    case 'SPREADSHEET_LOADING':\r\n      return {\r\n        ...state,\r\n        spreadsheet: {\r\n          ...state.spreadsheet,\r\n          isLoading: action.bool\r\n        }\r\n      };\r\n\r\n    case 'SPREADSHEET_ERROR':\r\n      return {\r\n        ...state,\r\n        spreadsheet: {\r\n          ...state.spreadsheet,\r\n          error: action.err\r\n        }\r\n      };\r\n    case 'MARKET_FETCH_SUCCESS':\r\n      return {\r\n        ...state,\r\n        market: {\r\n          ...state.market,\r\n          data: action.data\r\n        }\r\n      };\r\n\r\n    case 'MARKET_LOADING':\r\n      return {\r\n        ...state,\r\n        market: {\r\n          ...state.market,\r\n          isLoading: action.bool\r\n        }\r\n      };\r\n\r\n    case 'MARKET_ERROR':\r\n      return {\r\n        ...state,\r\n        market: {\r\n          ...state.market,\r\n          error: action.err\r\n        }\r\n      };\r\n\r\n      case 'SET_CURRENCY':\r\n      return {\r\n        ...state,\r\n        currency: action.cur\r\n      };\r\n\r\n      case 'SET_TABLE_DATA':\r\n      return {\r\n        ...state,\r\n        tableData: action.data\r\n      };\r\n\r\n    case 'SORT_ITEMS':\r\n      return {\r\n        ...state,\r\n        sortBy: state.sortBy === action.sortBy ? state.sortBy : action.sortBy,\r\n        sortDesc: state.sortBy !== action.sortBy ? state.sortDesc : !state.sortDesc\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};","import { createContext } from 'react';\r\n\r\nexport const StoreContext = createContext();","export function sorting(arr = [], sortBy, reverse = false) {\r\n  const sortedArr = arr.sort((a, b) => {\r\n    // console.log(a[sortBy]);\r\n\r\n    if (typeof a[sortBy] === 'string' && typeof b[sortBy] === 'string') {\r\n      if (a[sortBy].toLowerCase() > b[sortBy].toLowerCase()) {\r\n        return 1;\r\n      }\r\n      if (a[sortBy].toLowerCase() < b[sortBy].toLowerCase()) {\r\n        return -1;\r\n      }\r\n      return 0;\r\n    }\r\n    if (typeof a[sortBy] === 'number' && typeof b[sortBy] === 'number') {\r\n      return a[sortBy] - b[sortBy];\r\n    }\r\n    return console.error(`Not valid format data ${ a } or ${ b } for sorting!`);\r\n  });\r\n\r\n  if (reverse) {\r\n    return sortedArr.reverse()\r\n  }\r\n\r\n  return sortedArr;\r\n}","export const spreadsheetFetchSuccess = data => ({\r\n  type: 'SPREADSHEET_FETCH_SUCCESS',\r\n  data\r\n});\r\n\r\nexport const spreadsheetLoading = bool => ({\r\n  type: 'SPREADSHEET_LOADING',\r\n  bool\r\n});\r\n\r\nexport const spreadsheetError = msg => ({\r\n  type: 'SPREADSHEET_ERROR',\r\n  msg\r\n});\r\n\r\nexport const marketFetchSuccess = data => ({\r\n  type: 'MARKET_FETCH_SUCCESS',\r\n  data\r\n});\r\n\r\nexport const marketLoading = bool => ({\r\n  type: 'MARKET_LOADING',\r\n  bool\r\n});\r\n\r\nexport const marketError = msg => ({\r\n  type: 'MARKET_ERROR',\r\n  msg\r\n});\r\n\r\nexport const setCurrency = cur => ({\r\n  type: 'SET_CURRENCY',\r\n  cur\r\n});\r\n\r\nexport const setTableData = data => ({\r\n  type: 'SET_TABLE_DATA',\r\n  data\r\n});\r\n\r\nexport const sortItems = sortBy => ({\r\n  type: 'SORT_ITEMS',\r\n  sortBy\r\n});","import React, { useContext } from 'react';\r\nimport { StoreContext } from '../../context';\r\nimport { sortItems } from '../../context/actions';\r\n\r\nconst head = [\r\n  {id: 'title', title: 'Coin'},\r\n  {id: 'quantity', title: 'Quantity'},\r\n  {id: 'buyPrice', title: 'Buy Price'},\r\n  {id: 'price', title: 'Current Price'},\r\n  {id: 'profit', title: 'Profit'},\r\n  {id: 'gain', title: 'Gain'},\r\n  {id: 'val', title: 'Value'},\r\n  {id: 'wallet', title: 'Wallet'},\r\n];\r\n\r\nexport default function TableHead(props) {\r\n  const {state, dispatch} = useContext(StoreContext);\r\n\r\n\r\n\r\n  return (\r\n    <div style={ {display: 'flex', padding: '10px 0'} }>\r\n      {\r\n        head.map(item => (\r\n          <div\r\n            style={ {width: 120, fontWeight: 'bold'} }\r\n            key={ Math.random() }\r\n            onClick={ () => dispatch(sortItems(item.id)) }\r\n          >\r\n            { item.title }\r\n            {state.sortBy === item.id\r\n            && <div style={{display: 'inline-block', marginLeft: 5}}>\r\n              {state.sortDesc\r\n              ? '↓'\r\n              : '↑'}\r\n            </div>}\r\n\r\n          </div>\r\n        ))\r\n      }\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\n\r\nexport default function TableRow(props) {\r\n  const {title, buyPrice, price, quantity, buyFee, sellFee, wallet} = props.data;\r\n\r\n  return (\r\n    <div style={{display: 'flex'}}>\r\n      <div style={{width: 120}}>{title}</div>\r\n      <div style={{width: 120}}>{quantity}</div>\r\n      <div style={{width: 120}}>{buyPrice}</div>\r\n      <div style={{width: 120}}>{price}</div>\r\n      <div style={{width: 120}}>{title}</div>\r\n      <div style={{width: 120}}>{title}</div>\r\n      <div style={{width: 120}}>{title}</div>\r\n      <div style={{width: 120}}>{Array.isArray(wallet) ? wallet.join(', ') : wallet}</div>\r\n      <div>{buyFee} / {sellFee}</div>\r\n    </div>\r\n  )\r\n}","import React, { useContext, useEffect, useCallback } from 'react';\r\nimport { StoreContext } from '../../context';\r\n\r\nimport TableHead from '../TableHead';\r\nimport TableRow from '../TableRow';\r\n\r\nexport default function Table(props) {\r\n  const {state, dispatch} = useContext(StoreContext);\r\n\r\n  return (\r\n    <div>\r\n\r\n      <TableHead />\r\n\r\n      { state.tableData.map(item => {\r\n        if (!item.group) {\r\n          return (<TableRow data={ item } key={Math.random()} />);\r\n        } else {\r\n          return (\r\n            <div key={Math.random()}>\r\n              <TableRow data={ item } />\r\n              <div>\r\n                { item.group.map(i => {\r\n                  return (<TableRow data={ i } key={Math.random()} />);\r\n                }) }\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n      }) }\r\n\r\n    </div>\r\n  );\r\n}","import React, { useContext, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport { StoreContext } from '../../context';\r\nimport {sorting} from '../../utilites'\r\n\r\nimport {\r\n  spreadsheetFetchSuccess,\r\n  spreadsheetLoading,\r\n  spreadsheetError,\r\n  marketFetchSuccess,\r\n  marketLoading,\r\n  marketError,\r\n  setTableData,\r\n  setCurrency\r\n} from '../../context/actions';\r\n\r\nimport Table from '../Table';\r\n\r\nconst SPREADSHEET_ADDRESS = '1paG7wL-ZRiAHvU6QcvtISVX2ROP8NTcvslQETh8ZdRQ';\r\nconst MARKET_KEY = 'DX8Js7mGTjkscOevUm0IpubG0nMWuO';\r\n\r\nexport default function TableContainer() {\r\n  const {state, dispatch} = useContext(StoreContext);\r\n\r\n  const getSpreadsheetData = useCallback(() => {\r\n    const schemaSpreadsheet = data => data.map(item => ({\r\n      title: item.gsx$title.$t.toUpperCase(),\r\n      buyPrice: parseFloat(item.gsx$price.$t.replace(',', '.')),\r\n      quantity: parseFloat(item.gsx$quantity.$t.replace(',', '.')),\r\n      buyFee: parseFloat(item.gsx$buyfee.$t.replace(',', '.')),\r\n      sellFee: parseFloat(item.gsx$sellfee.$t.replace(',', '.')),\r\n      wallet: item.gsx$wallet.$t\r\n    }));\r\n\r\n    (async () => {\r\n      dispatch(spreadsheetLoading(true));\r\n\r\n      try {\r\n        const response = await axios.get(`https://spreadsheets.google.com/feeds/list/${ SPREADSHEET_ADDRESS }/od6/public/values?alt=json`);\r\n        const spreadsheetData = schemaSpreadsheet(response.data.feed.entry);\r\n\r\n        dispatch(spreadsheetFetchSuccess(spreadsheetData));\r\n      } catch (err) {\r\n        spreadsheetError(err);\r\n        console.error(err);\r\n      }\r\n\r\n      dispatch(spreadsheetLoading(false));\r\n    })();\r\n  }, [dispatch]);\r\n\r\n  const getMarketData = useCallback((currency = 'usd', coins = []) => {\r\n    const coinListWODouble = coins.reduce((acc, curr) => {\r\n      if (!acc.includes(curr)) {\r\n        acc.push(curr);\r\n      }\r\n      return acc;\r\n    }, []);\r\n\r\n    const coinList = coinListWODouble.reduce((acc, curr) => {\r\n      if (curr.toLowerCase() !== 'btc' && curr.toLowerCase() !== 'usdt') {\r\n        acc += `-${ curr.toLowerCase() }btc`;\r\n      }\r\n      return acc;\r\n    }, 'btcbtc-usdtbtc');\r\n\r\n    const schemaMarket = data => data.map(item => ({\r\n      title: item.Name,\r\n      label: item.Label,\r\n      price: item.Price,\r\n      timestamp: item.Timestamp\r\n    }));\r\n\r\n    (async () => {\r\n      dispatch(marketLoading(true));\r\n\r\n      try {\r\n        const response = await axios.get(`https://www.worldcoinindex.com/apiservice/ticker?key=${ MARKET_KEY }&label=${ coinList }&fiat=${ currency }`);\r\n        const marketData = schemaMarket(response.data.Markets);\r\n\r\n        dispatch(marketFetchSuccess(marketData));\r\n      } catch (err) {\r\n        marketError(err);\r\n        console.error(err);\r\n      }\r\n\r\n      dispatch(marketLoading(false));\r\n    })();\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    getSpreadsheetData();\r\n  }, [getSpreadsheetData]);\r\n\r\n  useEffect(() => {\r\n    if (!!state.spreadsheet.data.length) {\r\n      const coinsFromSpreadsheet = state.spreadsheet.data.map(item => item.title);\r\n\r\n      getMarketData(state.currency, coinsFromSpreadsheet);\r\n    }\r\n  }, [\r\n    state.spreadsheet.data.length,\r\n    state.spreadsheet.data,\r\n    getMarketData,\r\n    state.currency\r\n  ]);\r\n\r\n  const compileTableData = useCallback((spreadsheet, market) => {\r\n    const rawData = spreadsheet.map(item => {\r\n      const coinPriceData = market.filter(i => i.label.match(/.*(?=\\/)/).join().toLowerCase() === item.title.toLowerCase())[0];\r\n\r\n      return {\r\n        ...item,\r\n        price: coinPriceData.price\r\n      };\r\n    });\r\n\r\n    const currencyListWCount = rawData.reduce(function (acc, cur) {\r\n      if (!acc[cur.title]) {\r\n        acc[cur.title] = 1;\r\n      } else {\r\n        acc[cur.title]++;\r\n      }\r\n      return acc;\r\n    }, {});\r\n\r\n    let tableArr = [];\r\n\r\n    for (let key in currencyListWCount) {\r\n      if (currencyListWCount.hasOwnProperty(key)) {\r\n        if (currencyListWCount[key] > 1) {\r\n          let groupArr = [];\r\n          let sum = {\r\n            buyPrice: 0,\r\n            quantity: 0\r\n          };\r\n\r\n          rawData.forEach(item => {\r\n            if (item.title === key) {\r\n              groupArr.push(item);\r\n              sum.buyPrice += item.buyPrice;\r\n              sum.quantity += item.quantity;\r\n              sum.feeBuy += item.feeBuy;\r\n              sum.feeSell += item.feeSell;\r\n              // console.log(dateToTimestamp(item.date));\r\n            }\r\n          });\r\n\r\n          const walletList = groupArr.reduce((acc, curr) => {\r\n            if (!acc.includes(curr.wallet)) {\r\n              acc.push(curr.wallet);\r\n            }\r\n            return acc;\r\n          }, []);\r\n\r\n          tableArr.push({\r\n            title: key,\r\n            buyPrice: sum.buyPrice / currencyListWCount[key],\r\n            quantity: sum.quantity,\r\n            price: market.filter(i => i.label.match(/.*(?=\\/)/).join().toLowerCase() === key.toLowerCase())[0].price,\r\n            wallet: walletList,\r\n            group: sorting(groupArr, state.sortBy, state.sortDesc)\r\n          });\r\n        } else {\r\n          rawData.forEach(item => {\r\n            if (item.title === key) {\r\n              tableArr.push(item);\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    dispatch(setTableData(sorting(tableArr, state.sortBy, state.sortDesc)));\r\n  }, [dispatch, state.sortBy, state.sortDesc]);\r\n\r\n  useEffect(() => {\r\n    if (!!state.spreadsheet.data.length && !!state.market.data.length) {\r\n      compileTableData(state.spreadsheet.data, state.market.data);\r\n    }\r\n  }, [\r\n    state.spreadsheet.data,\r\n    state.market.data,\r\n    compileTableData,\r\n    state.spreadsheet.data.length,\r\n    state.market.data.length\r\n  ]);\r\n\r\n  if (state.spreadsheet.isLoading) {\r\n    return (<div>Loading...</div>);\r\n  }\r\n\r\n  if (state.spreadsheet.error) {\r\n    return (<div>{ state.table.error }</div>);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Table />\r\n\r\n      { <button onClick={ () => dispatch(setCurrency('rur')) }>Set Currency</button> }\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n// function dateToTimestamp(str) {\r\n//   return Date.parse(str\r\n//     .replace(/(\\d{2}).(\\d{2}).(\\d{4})/, '$3-$2-$1')\r\n//     .replace(/\\s/, 'T'));\r\n// }","import React from 'react';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport TableContainer from '../TableContainer';\r\n// import Switcher from '../Switcher';\r\n\r\nexport default function Main() {\r\n\r\n  return (\r\n    <Container maxWidth=\"xl\">\r\n      {/*<Switcher/>*/}\r\n      <TableContainer/>\r\n    </Container>\r\n  );\r\n}","import React, { useReducer } from 'react';\n\nimport { reducer, initialState } from './context/reducer';\nimport { StoreContext } from './context';\nimport Main from './components/Main';\n\nfunction App() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  return (\n    <StoreContext.Provider value={ {dispatch, state} }>\n      <Main />\n    </StoreContext.Provider>\n  );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App/>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}